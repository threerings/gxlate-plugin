#!/bin/sh

here=`dirname $0`

mode="$1"; shift
props="$1"; shift
domain="$1"; shift

logdir="../../translation_tool_logs/`date +%Y%m%d`";
log="$logdir/`date +%Y%m%d%H%M`_${domain}.log"

pipe()
{
    case $mode in
        tee*) mkdir -p $logdir; tee -a $log;;
        **) cat;;
    esac
}

case $mode in
  down|teedown) exec $here/xlate DownloadLanguage -o $domain -r "$props" "$@" | pipe;;
  up|teeup)  exec $here/xlate UploadEnglish -o $domain -r $props "$@" -x | pipe;;
  **) echo "Don't understand that option, expected up, down, teeup or teedown"; exit 1;;
esac
